import{R as e,r as t,a as n}from"./vendor.2f31b934.js";const s=({r:t,g:n,b:s})=>{const r=((e,t,n)=>("#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)).toUpperCase())(t,n,s);return e.createElement("div",{className:"flex content-center"},"hex:",e.createElement("span",null,r),e.createElement("div",{className:"inline-block w-5 h-5 ml-1",style:{backgroundColor:r}}))},r=({handleChange:n})=>{const[s,r]=t.exports.useState("未选择文件");return e.createElement("div",{className:"my-2"},e.createElement("label",{htmlFor:"uploadFile",className:"uppercase px-2 py-1 mx-1 border border-blue-500 rounded-lg text-blue-500 "},e.createElement("span",null,"select file"),e.createElement("input",{className:"hidden",onChange:e=>{const t=e.target.files;t.length&&(r(t[0].name),"function"==typeof n&&n(e))},type:"file",name:"uploadFile",id:"uploadFile"})),e.createElement("span",null,(a=s).length<30?a:`${a.substr(0,parseInt(15))}...${a.substr(a.length-parseInt(15),a.length)}`));var a},a=["ControlLeft","ControlRight"];class l extends e.Component{constructor(e){super(e),this.canvasRef=null,this.ctx=null,this.preObjURL=null}handleMouseMove(e){if(this.props.isCtrlDown())return;if(!this.ctx)return;const{x:t,y:n}=this.getMousePonint(e),s=this.ctx.getImageData(t,n,1,1).data,[r,a,l,o]=s;return this.props.handleMouseMove({x:t,y:n,r:r,g:a,b:l})}componentDidUpdate(){if(!this.props.objURL)return;if(this.preObjURL&&this.preObjURL===this.props.objURL)return;this.preObjURL=this.props.objURL,this.ctx=this.canvasRef.getContext("2d");const e=new Image;e.src=this.props.objURL,e.onload=()=>{this.canvasRef.width=e.width,this.canvasRef.height=e.height,this.ctx.drawImage(e,0,0)}}getMousePonint(e){const t=this.canvasRef.getBoundingClientRect();return{x:e.clientX-Math.round(t.left),y:e.clientY-Math.round(t.top)}}render(){return e.createElement("canvas",{ref:e=>{this.canvasRef=e},onMouseMove:e=>this.handleMouseMove(e)})}}class o extends e.Component{constructor(e){super(e),this.isCtrlDown=!1,this.state={r:0,g:0,b:0,x:0,y:0,objURL:null},document.addEventListener("keydown",(e=>{a.includes(e.code)&&(this.isCtrlDown=!0)})),document.addEventListener("keyup",(e=>{a.includes(e.code)&&(this.isCtrlDown=!1)}))}showImage(e){if(!e)return;const t=e.target.files;t.length&&this.setState({objURL:URL.createObjectURL(t[0])})}render(){return e.createElement("div",null,e.createElement(l,{isCtrlDown:()=>this.isCtrlDown,objURL:this.state.objURL,handleMouseMove:({x:e,y:t,r:n,g:s,b:r})=>this.setState({x:e,y:t,r:n,g:s,b:r})}),e.createElement("div",null,"图片坐标: ",`(${this.state.x}, ${this.state.y})`),e.createElement(s,{r:this.state.r,g:this.state.g,b:this.state.b}),e.createElement(r,{handleChange:e=>this.showImage(e)}),e.createElement("div",null,"按住 ctrl 暂停更新坐标 图片太大的话使用 chrome 自带的缩放"))}}n.render(e.createElement(e.StrictMode,null,e.createElement(o,null)),document.getElementById("root"));
